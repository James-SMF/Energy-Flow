# 能源流（Energy Flow）

> **极简策略解谜游戏：能量流动、放大、汇聚。掌握分布式优化的艺术——因为共振生于网络，而非垄断。**

## 🎮 游戏概述

《能源流》是一款基于 8×8 网格的回合制空间解谜游戏。玩家需策略性地放置与升级三类能量塔，以最大化能量收集效率，同时最小化能量损耗。每局游戏仅有 **100 行动点（AP）**，每一次放置与升级决策都至关重要。

核心设计哲学：**分布式网络优于中心化垄断**。一组中等等级的塔所构成的协同网络，其收益将始终高于单个满级塔搭配大量 1 级塔的配置。

## 🔑 核心机制

### 能量流动循环

```
发生器 →（可选放大器）→ 收集器（群）→ 得分
     ↓
墙壁/障碍物 → 能量损失 → 惩罚扣分
```

能量从发生器向**四方向**（上下左右）正交传播，直至：

- ✅ 被收集器捕获（单塔部分捕获，多塔形成网络）
- ⚡ 被放大器增强（链式乘法效应，含衰减）
- ❌ 撞击墙壁/障碍物（触发惩罚）

### 三类塔功能

| 塔类型 | 功能 | 1级基准值 | 关键特性 |
|--------|------|-----------|----------|
| **发生器（Generator）** 🌱 | 能量源头 | 100 能量输出 | 同时向4个方向发射能量 |
| **放大器（Amplifier）** 🔺 | 信号增强 | +25% 增益 | 链式叠加，每增加一跳衰减5% |
| **收集器（Collector）** 📡 | 能量捕获 | 60% 捕获效率（40%穿透） | 相邻收集器形成**捕获网络** |

## ⚖️ 行动点经济系统

| 操作 | 消耗 | 设计意图 |
|------|------|----------|
| 放置1级塔 | 5 AP | 低门槛鼓励多塔布局 |
| 升级（L*n* → L*n+1*） | `5 × n` AP | **超线性成本增长**：<br>1→2: 5 AP • 2→3: 10 AP • 3→4: 15 AP • 4→5: 20 AP |
| 最高等级 | 5级 | 100 AP下无法无脑满级所有塔，需策略取舍 |

> 💡 100 AP资源分配示例：<br>
> • 单塔满级（1→5）：`5 + (5+10+15+20) = 55 AP`，剩余45 AP仅够9个1级塔，布局脆弱<br>
> • **均衡策略**：4个3级发生器（各20 AP）+ 4个2级收集器（各10 AP）= 120 AP → 需取舍，**逼迫玩家优化组合**

## 📈 升级数值表（经100 AP重新平衡）

### 发生器输出

| 等级 | 能量输出 | 累计AP成本* | 每AP效率 |
|------|----------|-------------|----------|
| 1 | 100 | 5 | 20.0 |
| 2 | 125 | 10 | 12.5 |
| 3 | 150 | 20 | 7.5 |
| 4 | 175 | 35 | 5.0 |
| 5 | 200 | 55 | 3.6 |

*\*含初始放置成本*

### 放大器链式增益

| 等级 | 单塔增益 | 2塔链* | 3塔链* |
|------|----------|--------|--------|
| 1 | 1.25× | 1.48× | 1.76× |
| 2 | 1.45× | 2.00× | 2.66× |
| 3 | 1.60× | 2.43× | 3.47× |
| 4 | 1.72× | 2.79× | 4.29× |
| 5 | 1.82× | 3.12× | 5.04× |

*\*链式公式：总增益 = Π(各塔增益) × 0.95^(链长-1)*

### 收集器网络效率

| 配置 | 网络效率 | 等效单塔等级 |
|------|----------|--------------|
| 1个1级 | 60% | 1级 |
| 2个相邻1级 | 84% | **> 3级**（81%） |
| 2个相邻2级 | 92.2% | **> 4级**（87%） |
| 3个簇状2级 | 97.8% | **> 5级**（91%） |

> 🌐 **网络公式**：`总效率 = 1 - Π(各塔穿透率)`  
> 例：2个1级收集器 → `1 - 0.4 × 0.4 = 84%`

## ⚠️ 惩罚机制

撞击墙壁/障碍物的能量将触发扣分：

```
惩罚分 = 损失能量 × 0.6 × (1 + 0.5 × 是否重大损失)
```

其中 `是否重大损失 = 1` 当单次碰撞损失 > 总输出30%

| 场景 | 损失能量 | 惩罚分 | 策略启示 |
|------|----------|--------|----------|
| 边缘小泄漏 | 30 | 18 | 可接受的低效 |
| 布局失误（直撞墙） | 120 | 108 | **重罚** — 强制紧凑布局 |
| 长距离空传播（5格+） | 50（每格衰减2%） | 30 | 奖励塔群紧密排列 |

> 💡 **额外规则**：能量每经过1格空地衰减2%，进一步惩罚松散布局

## 🧠 策略验证：为何网络必胜（100 AP场景）

### ❌ 反面教材：单塔垄断策略

```
[ G5 ] → → → → → → → [ C1 ]
```

- **AP消耗**：55 (G5) + 5 (C1) = 60 AP（剩余40 AP浪费或低效补充）
- **总输出**：200
- **捕获**：200 × 60% = 120
- **损失**：80 → 惩罚 48
- **净得分**：**72**

### ✅ 推荐策略：四塔均衡网络

```
[ G3 ] → [ A2 ] → [ C2 ] — [ C2 ]
[ G3 ] → [ A2 ] → [ C2 ] — [ C2 ]
```

- **AP消耗**：
  - 2个G3：2 × 20 = 40 AP
  - 2个A2：2 × 10 = 20 AP
  - 4个C2：4 × 10 = 40 AP
  - **总计：100 AP**
- **总输出**：300
- **网络效率**：4个2级收集器簇 → `1 - 0.28⁴ = 99.38%`
- **捕获**：300 × 99.38% ≈ 298
- **损失**：2 → 惩罚 1.2
- **净得分**：**296.8**（**是单塔策略的4.1倍**）

### ✅ 进阶策略：六塔分布式（最优解）

- 3个G2（各10 AP）+ 2个A2（各10 AP）+ 5个C2（各10 AP）= 100 AP
- 输出：375，网络效率：99.8%，净得分 ≈ **374**
- **结论**：塔数量↑ + 等级均衡 → 协同效应指数级增长

> 💡 **黄金法则**：三个2级塔 > 一个5级塔。永远成立。

## 🎯 计分系统

```
最终得分 = 总捕获能量 - 总惩罚分
```

- **主要目标**：最大化净能量捕获
- **次要目标**：最小化能量浪费与传播距离
- **无时间压力**：自由优化布局
- **完美通关**：网络效率 ≈100%，零墙壁碰撞

## 🧪 数值设计哲学

能源流通过三重数学机制确保分布式策略优势：

1. **升级成本超线性增长**  
   `成本 ∝ 等级²` 使高等级升级性价比急剧下降

2. **收益边际递减**  
   每级提升的相对增益逐级缩小（如发生器5级输出仅是1级的2倍，但成本9倍）

3. **网络协同效应**  
   相邻塔产生乘法价值（收集器网络、放大器链），孤立塔无法复制

> 三者结合确保：**N个K级塔的总收益 > 1个N×K级塔**（N≥2, K≥2）

## 📊 100 AP策略对比总表

| 策略 | 配置 | 总输出 | 捕获效率 | 损失 | 净得分 | 性价比 |
|------|------|--------|----------|------|--------|--------|
| 单塔垄断 | 1×G5 + 1×C1 | 200 | 60% | 80 | 72 | 基准 |
| 双塔均衡 | 2×G3 + 2×C2 | 300 | 92.2% | 23.4 | 263 | **3.7×** |
| 四塔网络 | 2×G3 + 2×A2 + 4×C2 | 300 | 99.4% | 1.8 | 297 | **4.1×** |
| 六塔分布式 | 3×G2 + 2×A2 + 5×C2 | 375 | 99.8% | 0.75 | 374 | **5.2×** |

> ✅ 数据证明：**塔数量与等级均衡性共同决定收益上限**

## 🚀 开发状态

| 模块 | 状态 |
|------|------|
| 核心机制 | ✅ 已实现 |
| 数值平衡 | ✅ 100 AP场景验证通过 |
| 视觉原型 | 🟡 开发中 |
| Web/移动端 | ⏳ 计划2026 Q3 |
| 障碍物生成器 | 💡 后续迭代（程序化地图） |

## 📜 许可协议

《能源流》概念设计与数值体系 © 2026  
核心机制以 **CC BY-NC 4.0** 协议开放，适用于非商业游戏开发/原型制作。  
商业用途需另行授权。

> *“孤塔仅能低鸣，众塔方成共鸣。”*  
> —— 能源流设计宣言

---

**试玩原型**：[resonance-grid.example.com](https://example.com) *(占位链接)*  
**反馈建议**：[github.com/yourname/resonance-grid/issues](https://github.com)  
**策略讨论**：Discord #resonance-grid 频道